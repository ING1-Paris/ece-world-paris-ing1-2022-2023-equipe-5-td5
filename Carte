#include <stdio.h>
#include <stdlib.h>
#include <allegro.h>


#define SCREEN_W 1500  //largeur fenêtre allegro
#define SCREEN_H 1000  //hauteur fenêtre allegro


typedef struct banqueImage      //Structure pour stocker les images 
{
    BITMAP * fondMenu;          //fond du menu principal
    BITMAP * joueur;            // sprite du joueur
    BITMAP * batMinigame[3];    //batiments représentant les mini jeux
    BITMAP * finishLine;        // ligne d'arrivée de la course hippique
    BITMAP * taupe;             //taupe

} t_banqueImage;



typedef struct banquePolice    //Structure pour stocker les polices
{
    FONT * Roller_72;  
    FONT * Roller_it_24;
    FONT * Pixel_11;
    FONT * System_14;
    FONT * Hudson_26;

} t_banquePolice;



typedef struct joueur   //structure chargée de stocker les informations d'un joueur
{
    char* name;      //nom joueur 
    int taillenom;   //taille du nom
    int tickets;     //nombre de tickets 
    int score;       //score
    int color;       //couleur

} t_joueur;



typedef struct terrain         //structure qui stock les informations de la carte où l'on se déplace pour atteindre les différentes attractions
{
    int occupied;              //0=non (traversable) 1=oui (pas traversable)
    int isStartAttraction;     //savoir si la case est un emplacement pour démarrer une attraction
    int isPlayerPos;           //savoir si le joueur est sur cette case
    
} t_terrain;


typedef struct minigame   //structure chargée de stocker les informations d'une attraction
{
    char titre[20];       //nom
    int difficulty;       //difficulté
    int coordBat[2][2];   //tableau de cases prise par le bat
    int coordPlay[2];     //coord de la case qui lance le mini-jeu  

} t_minigame;



typedef struct partie //structure principale chargée de stocker toutes les infos de la partie
{
    t_joueur playerBase[2];     //tab de 2 joueurs  
    t_minigame jeux[4];         //tab de 4 minigame  
    t_terrain plateau[15][15];  //carte du jeu
    
} t_partie;



t_banquePolice loadBanquePolices();
t_banqueImage loadBanqueImage();
int isClickInCoord(int x1, int x2, int y1, int y2);


//MAIN

int main()
{
    
    srand(time(NULL));    //initialisation de la fonction random 
    allegro_init();       //initialisation allegro
    install_keyboard();   //acces utilisation clavier
    install_mouse();      //acces utilisation souris
    set_color_depth(desktop_color_depth());   //initialisation de la palette de couleur
    
    if((set_gfx_mode(GFX_AUTODETECT_WINDOWED,SCREEN_W,SCREEN_H,0,0))!=0)     //paramètres de la fenêtre
    {
       //blindage si problème avec la fenêtre allegro
        allegro_message("Pb de mode graphique"); //indication du problème
        allegro_exit(); //fermeture d'allegro                                          
        exit(EXIT_FAILURE); //sortie forcée du programme                                   
    }
    
    show_mouse(screen); //on affiche la souris à l'écran

    BITMAP * buffer = create_bitmap(SCREEN_W,SCREEN_H); //déclaration du buffer

    t_banquePolice police = loadBanquePolices();
    t_banqueImage image = loadBanqueImage();
    t_partie partie;

    int choix=0;
    int actionJoueur=0;


    int terrain[10][10];

    for(int i=0; i<10; i++) //pour toutes les cases de la carte
    {
        for(int j=0; j<10; j++)
        {
            terrain[i][j]=0;
        }
    }

